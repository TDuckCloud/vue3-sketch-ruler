var ne=Object.defineProperty;var H=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var z=(e,t,n)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t)=>{for(var n in t||(t={}))ae.call(t,n)&&z(e,n,t[n]);if(H)for(var n of H(t))le.call(t,n)&&z(e,n,t[n]);return e};import{d as D,r as p,o as V,c as w,w as E,v as F,a as L,b as m,t as j,n as B,e as $,f as U,g as q,h as I,i as O,F as G,j as re,k as Q,l as oe,m as se,p as ie,u as ue,q as ce,s as de,x as he,y as ve}from"./vendor.2e7fe94a.js";const fe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};fe();const pe={scale:Number,thick:Number,palette:Object,index:Number,start:Number,vertical:Boolean,value:Number,isShowReferLine:Boolean};var W=(e,t)=>{for(const[n,l]of t)e[n]=l;return e};const me=D({name:"LineRuler",props:pe,emits:["onMouseDown","onRelease","onRemove"],setup(e,{emit:t}){const n=p(0),l=p(!0);V(()=>{n.value=e.value});const o=u=>{l.value=u>=0},a=w(()=>{const u=(n.value-e.start)*e.scale;o(u);const v=u+"px";return e.vertical?{top:v}:{left:v}}),r=w(()=>{var f;const u=`1px solid ${(f=e.palette)==null?void 0:f.lineColor}`,v=e.vertical?{borderTop:u}:{borderLeft:u},d=e.isShowReferLine?e.vertical?"ns-resize":"ew-resize":"none";return K({cursor:d},v)}),c=w(()=>e.vertical?{left:e.thick+"px"}:{top:e.thick+"px"});return{startValue:n,showLine:l,offset:a,borderCursor:r,actionStyle:c,handleDown:u=>{const v=e.vertical?u.clientY:u.clientX,d=n.value;t("onMouseDown");const f=k=>{const b=e.vertical?k.clientY:k.clientX,_=Math.round(d+(b-v)/e.scale);n.value=_},N=()=>{t("onRelease",n.value,e.index),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",N)},handleRemove:()=>{t("onRemove",e.index)}}}}),we={class:"value"};function ge(e,t,n,l,o,a){return E(($(),L("div",{class:"line",style:B([e.offset,e.borderCursor]),onMousedown:t[1]||(t[1]=(...r)=>e.handleDown&&e.handleDown(...r))},[m("div",{class:"action",style:B(e.actionStyle)},[m("span",{class:"del",onClick:t[0]||(t[0]=(...r)=>e.handleRemove&&e.handleRemove(...r))},"\xD7"),m("span",we,j(e.startValue),1)],4)],36)),[[F,e.showLine]])}var Ce=W(me,[["render",ge],["__scopeId","data-v-069c473f"]]);const ye=e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1,Z=.83,be=(e,t,n,l,o,a)=>{const{scale:r,width:c,height:s,palette:i}=o,{bgColor:u,fontColor:v,shadowColor:d,ratio:f,longfgColor:N,shortfgColor:k}=i;if(e.scale(f,f),e.clearRect(0,0,c,s),e.fillStyle=u,e.fillRect(0,0,c,s),l){const g=(n-t)*r,R=l*r;e.fillStyle=d,a?e.fillRect(g,0,R,s*3/8):e.fillRect(0,g,c*3/8,R)}const b=ye(r),_=b*r,S=b*10,P=S*r,M=Math.floor(t/b)*b,T=Math.floor(t/S)*S,Y=(M-t)/b*_,h=(T-t)/S*P,y=t+Math.ceil((a?c:s)/r);e.beginPath(),e.fillStyle=v,e.strokeStyle=N;for(let g=T,R=0;g<y;g+=S,R++){const C=h+R*P+.5;a?e.moveTo(C,0):e.moveTo(0,C),e.save(),a?e.translate(C,s*.4):e.translate(c*.4,C),a||e.rotate(-Math.PI/2),e.scale(Z/f,Z/f),e.fillText(g.toString(),4*f,7*f),e.restore(),a?e.lineTo(C,s*9/16):e.lineTo(c*9/16,C)}e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle=k;for(let g=M,R=0;g<y;g+=b,R++){const C=Y+R*_+.5;a?e.moveTo(C,0):e.moveTo(0,C),g%S!=0&&(a?e.lineTo(C,s*1/4):e.lineTo(c*1/4,C))}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)},Re={showIndicator:Boolean,valueNum:Number,scale:Number,ratio:Number,palette:Object,vertical:Boolean,start:Number,width:Number,height:Number,selectStart:Number,selectLength:Number},ke=D({name:"CanvasRuler",props:Re,emits:["onAddLine","update:showIndicator","update:valueNum"],setup(e,{emit:t}){const n=U({canvasContext:null}),l=p(null);V(()=>{o(),a(),r()});const o=()=>{n.canvasContext=l.value&&l.value.getContext("2d")},a=()=>{if(l.value){const s=e.ratio;l.value.width=e.width*s,l.value.height=e.height*s;const i=n.canvasContext;i&&(i.font=`${12*s}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,i.lineWidth=1,i.textBaseline="middle")}},r=()=>{const s={scale:e.scale,width:e.width,height:e.height,palette:e.palette};n.canvasContext&&be(n.canvasContext,e.start,e.selectStart,e.selectLength,s,!e.vertical)};return q(()=>e.start,()=>r()),q([()=>e.width,()=>e.height],()=>{a(),r()}),{handle:(s,i)=>{const u=(f,N,k)=>Math.round(N+f/k),v=e.vertical?s.offsetY:s.offsetX,d=u(v,e.start,e.scale);switch(i){case"click":t("onAddLine",d);break;case"enter":t("update:valueNum",d),t("update:showIndicator",!0);break;default:t("update:valueNum",d);break}},canvas:l}}});function Se(e,t,n,l,o,a){return $(),L("canvas",{ref:"canvas",class:"ruler",onClick:t[0]||(t[0]=r=>e.handle(r,"click")),onMouseenter:t[1]||(t[1]=r=>e.handle(r,"enter")),onMousemove:t[2]||(t[2]=r=>e.handle(r,"move")),onMouseleave:t[3]||(t[3]=r=>e.$emit("update:showIndicator",!1))},null,544)}var $e=W(ke,[["render",Se]]);const Ne={scale:Number,ratio:Number,thick:Number,palette:Object,vertical:{type:Boolean,default:!0},width:{type:Number,default:200},height:{type:Number,default:200},start:{type:Number,default:0},lines:{type:Array,default:()=>[]},selectStart:{type:Number},selectLength:{type:Number},isShowReferLine:{type:Boolean}};const Le=D({name:"RulerWrapper",components:{CanvasRuler:$e,RulerLine:Ce},props:Ne,setup(e){const t=p(!1),n=p(0),l=w(()=>e.vertical?"v-container":"h-container"),o=w(()=>{const i={width:`calc(100% - ${e.thick}px)`,height:`${e.thick+1}px`,left:`${e.thick}px`},u={width:`${e.thick&&e.thick+1}px`,height:`calc(100% - ${e.thick}px)`,top:`${e.thick}px`};return e.vertical?u:i}),a=w(()=>{var d;const i=(n.value-e.start)*e.scale;let u="top",v="borderLeft";return u=e.vertical?"top":"left",v=e.vertical?"borderBottom":"borderLeft",{[u]:i+"px",[v]:`1px solid ${(d=e.palette)==null?void 0:d.lineColor}`}}),r=i=>{e.lines.push(i)},c=(i,u)=>{const v=i-e.start,d=(e.vertical?e.height:e.width)/e.scale;v<0||v>d?s(u):e.lines[u]=i},s=i=>{e.lines.splice(i,1)};return{showIndicator:t,valueNum:n,rwClassName:l,rwStyle:o,indicatorStyle:a,handleNewLine:r,handleLineRelease:c,handleLineRemove:s}}}),_e={class:"lines"},Be={class:"value"};function Oe(e,t,n,l,o,a){const r=I("CanvasRuler"),c=I("RulerLine");return $(),L("div",{class:Q(e.rwClassName),style:B(e.rwStyle)},[O(r,{vertical:e.vertical,scale:e.scale,width:e.width,height:e.height,start:e.start,ratio:e.ratio,"select-start":e.selectStart,"select-length":e.selectLength,palette:e.palette,valueNum:e.valueNum,"onUpdate:valueNum":t[0]||(t[0]=s=>e.valueNum=s),showIndicator:e.showIndicator,"onUpdate:showIndicator":t[1]||(t[1]=s=>e.showIndicator=s),onOnAddLine:e.handleNewLine},null,8,["vertical","scale","width","height","start","ratio","select-start","select-length","palette","valueNum","showIndicator","onOnAddLine"]),E(m("div",_e,[($(!0),L(G,null,re(e.lines,(s,i)=>($(),oe(c,{key:s+i,index:i,value:s>>0,scale:e.scale,start:e.start,thick:e.thick,palette:e.palette,vertical:e.vertical,"is-show-refer-line":e.isShowReferLine,onOnRemove:e.handleLineRemove,onOnRelease:e.handleLineRelease},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line","onOnRemove","onOnRelease"]))),128))],512),[[F,e.isShowReferLine]]),E(m("div",{class:"indicator",style:B(e.indicatorStyle)},[m("div",Be,j(e.valueNum),1)],4),[[F,e.showIndicator]])],6)}var We=W(Le,[["render",Oe],["__scopeId","data-v-58d4d558"]]);const Ae={scale:{type:Number,default:1},ratio:{type:Number,default:1},thick:{type:Number,default:16},palette:Object,startX:{type:Number,default:0},startY:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},shadow:{type:Object,default:()=>({x:0,y:0,width:0,height:0})},lines:{type:Object,default:()=>({h:[],v:[]})},cornerActive:{type:Boolean,default:!1},isShowReferLine:{type:Boolean,default:!0}},De={ratio:{type:Number,default:1},thick:{type:Number,default:16},palette:Object,lines:{type:Object,default:()=>({h:[],v:[]})},cornerActive:{type:Boolean,default:!1},isShowReferLine:{type:Boolean,default:!0}},J=e=>{function t(l,o){return Object.keys(l).forEach(a=>{a&&l.hasOwnProperty(a)&&(typeof o.key=="object"?l[a]=t(l[a],o[a]):o.hasOwnProperty(a)&&(l[a]=o[a]))}),l}return t({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#EB5648",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e||{})};const Ie=D({name:"SketchRule",components:{RulerWrapper:We},props:Ae,emits:["onCornerClick","handleLine"],setup(e,{emit:t}){const n=w(()=>J(e.palette)),l=w(()=>e.cornerActive?" active":""),o=w(()=>({backgroundColor:n.value.bgColor,width:e.thick+"px",height:e.thick+"px",borderRight:`1px solid ${n.value.borderColor}`,borderBottom:`1px solid ${n.value.borderColor}`}));return{paletteCpu:n,cornerActiveClass:l,cornerStyle:o,onCornerClick:r=>{t("onCornerClick",r)}}}}),Pe={id:"mb-ruler",class:"style-ruler mb-ruler"};function Me(e,t,n,l,o,a){const r=I("RulerWrapper");return $(),L("div",Pe,[O(r,{vertical:!1,width:e.width,height:e.thick,"is-show-refer-line":e.isShowReferLine,thick:e.thick,ratio:e.ratio,start:e.startX,lines:e.lines.h,"select-start":e.shadow.x,"select-length":e.shadow.width,scale:e.scale,palette:e.paletteCpu},null,8,["width","height","is-show-refer-line","thick","ratio","start","lines","select-start","select-length","scale","palette"]),O(r,{vertical:!0,width:e.thick,height:e.height,"is-show-refer-line":e.isShowReferLine,thick:e.thick,ratio:e.ratio,start:e.startY,lines:e.lines.v,"select-start":e.shadow.y,"select-length":e.shadow.height,scale:e.scale,palette:e.paletteCpu},null,8,["width","height","is-show-refer-line","thick","ratio","start","lines","select-start","select-length","scale","palette"]),m("a",{class:Q(["corner",e.cornerActiveClass]),style:B(e.cornerStyle),onClick:t[0]||(t[0]=(...c)=>e.onCornerClick&&e.onCornerClick(...c))},null,6)])}var A=W(Ie,[["render",Me]]);const Te=D({name:"SketchRulerWrapper",components:{SketchRule:A},props:De,emits:["handleLine","getscele","ClickOutside2ClearAll"],setup(e,{slots:t,attrs:n}){let l=p(1);const o=w(()=>J(e.palette)),a=p(null);let r=p(0),c=p(0);const s=p(null),i=p(null);V(()=>{if(console.log(n,"attrsattrs"),a.value){const h=a.value.getBoundingClientRect();r.value=h.width-21,c.value=h.height-21,console.log(r.value,c.value," width.value")}if(_(),S(),console.log(d.value,"canvasWidth.value"),d.value&&s.value){let h=i.value&&i.value.getBoundingClientRect().width-d.value;s.value.scrollLeft=h/2}});let u=p(0),v=p(0),d=p(0),f=p(0);const N=()=>{ie(()=>{S()})};let k=0,b=0;const _=()=>{if(s.value&&t.default&&t.default()[0].el){const h=t.default()[0].el;console.log(h.style,"canvas");const y=h.getBoundingClientRect();k=y.width,b=y.height}},S=()=>{if(s.value&&t.default&&t.default()[0].el){const h=t.default()[0].el;console.log(h.style,"canvas"),h.style.transform=`scale(${l.value})`,h.style.left="0px",h.style.width=k*l.value+"px",h.style.height=b*l.value+"px",h.style.transformOrigin="50% 0";const y=h.getBoundingClientRect();d.value=y.width,f.value=y.height;const g=s.value.getBoundingClientRect(),R=(g.left+e.thick-y.left)/l.value,C=(g.top+e.thick-y.top)/l.value;u.value=R>>0,v.value=C>>0}},P=h=>{if(h.ctrlKey||h.metaKey){h.preventDefault();const y=parseFloat(Math.max(.2,l.value-h.deltaY/1e3).toFixed(2));l.value=y,console.log(l.value,"scale.value")}N()},M=w(()=>({width:d.value+"px",height:f.value+"px",transform:`scale(${l.value})`})),T=w(()=>({x:0,y:0,width:d.value,height:f.value}));return{screensRef:s,containerRef:i,scale:l,startX:u,width:r,ruler:a,height:c,startY:v,paletteCpu:o,shadow:T,canvasStyle:M,handleWheel:P,handleCornerClick:()=>{}}}}),Ve={class:"rule-wrapper",ref:"ruler"},Ee={class:""};function Fe(e,t,n,l,o,a){const r=I("SketchRule");return $(),L("div",Ve,[O(r,{thick:e.thick,scale:e.scale,width:e.width,"start-x":e.startX,"start-y":e.startY,shadow:e.shadow,palette:e.paletteCpu,height:e.height,"corner-active":!0,lines:e.lines,onHandleLine:t[0]||(t[0]=c=>e.$emit("handleLine")),onOnCornerClick:e.handleCornerClick},null,8,["thick","scale","width","start-x","start-y","shadow","palette","height","lines","onOnCornerClick"]),m("div",{class:"screens",ref:"screensRef",onWheel:t[1]||(t[1]=(...c)=>e.handleWheel&&e.handleWheel(...c))},[m("div",{ref:"containerRef",class:"screen-container canvas-wrapper",style:B(e.canvasStyle)},[m("div",Ee,[se(e.$slots,"default")])],4)],544)],512)}var x=W(Te,[["render",Fe]]);A.install=e=>{e.component(A.name,A)};x.install=e=>{e.component(A.name,A)};const X={name:"",components:{SketchRuleWrapper:x},setup(){const e=U({scale:1,wrapperwith:window.innerWidth-400,wrapperheight:window.innerHeight-300,lines:{h:[433,588],v:[33,143]},thick:20,isShowRuler:!0,isShowReferLine:!0}),t=w(()=>e.wrapperwith+22+"px"),n=w(()=>e.wrapperheight+22+"px");return V(()=>{window.addEventListener("resize",()=>{e.wrapperwith=window.innerWidth-400,e.wrapperheight=window.innerHeight-400})}),{wrapperwithpx:t,wrapperheightpx:n,state:e}}},ee=()=>{ue(e=>({"03b21a40":e.wrapperwithpx,"13942281":e.wrapperheightpx}))},te=X.setup;X.setup=te?(e,t)=>(ee(),te(e,t)):ee;const je=X,Xe=e=>(de("data-v-7250f6af"),e=e(),he(),e),Ye={class:"top"},He=Xe(()=>m("div",{class:"canvas"},null,-1));function ze(e,t,n,l,o,a){const r=I("SketchRuleWrapper");return $(),L("div",null,[m("div",Ye,"\u7F29\u653E\u6BD4\u4F8B:"+j(l.state.scale),1),O(r,{class:"wrapper"},{default:ce(()=>[He]),_:1})])}var Ke=W(je,[["render",ze],["__scopeId","data-v-7250f6af"]]);const Ue=m("div",null,[m("a",{href:"https://data.avuejs.com/build/1",target:"_blank",class:"redlink"}," \u5B9E\u4F8B\u5730\u5740:https://data.avuejs.com/build/1 "),m("div",null,"\u6309\u4F4FCtril+\u9F20\u6807\u6EDA\u8F6E\u53EF\u4EE5\u7F29\u653E\u9875\u9762")],-1),qe={setup(e){return(t,n)=>($(),L(G,null,[Ue,O(Ke)],64))}},Ge=ve(qe);Ge.mount("#app");
