var x=Object.defineProperty;var X=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var F=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))ee.call(t,n)&&F(e,n,t[n]);if(X)for(var n of X(t))te.call(t,n)&&F(e,n,t[n]);return e};import{d as B,r as p,o as E,c as L,w as H,v as W,a as N,b as R,t as j,n as O,e as $,f as K,g as q,h as I,i as D,F as G,j as ne,k as U,l as oe,m as Q,p as le,q as ae}from"./vendor.dcce5718.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};re();const se={scale:Number,thick:Number,palette:Object,index:Number,start:Number,vertical:Boolean,value:Number,isShowReferLine:Boolean};var A=(e,t)=>{for(const[n,r]of t)e[n]=r;return e};const ie=B({name:"LineRuler",props:se,emits:["onMouseDown","onRelease","onRemove"],setup(e,{emit:t}){const n=p(0),r=p(!0);E(()=>{n.value=e.value});const o=f=>{r.value=f>=0},a=L(()=>{const f=(n.value-e.start)*e.scale;o(f);const u=f+"px";return e.vertical?{top:u}:{left:u}}),l=L(()=>{var h;const f=`1px solid ${(h=e.palette)==null?void 0:h.lineColor}`,u=e.vertical?{borderTop:f}:{borderLeft:f},i=e.isShowReferLine?e.vertical?"ns-resize":"ew-resize":"none";return z({cursor:i},u)}),v=L(()=>e.vertical?{left:e.thick+"px"}:{top:e.thick+"px"});return{startValue:n,showLine:r,offset:a,borderCursor:l,actionStyle:v,handleDown:f=>{const u=e.vertical?f.clientY:f.clientX,i=n.value;t("onMouseDown");const h=S=>{const s=e.vertical?S.clientY:S.clientX,C=Math.round(i+(s-u)/e.scale);n.value=C},d=()=>{t("onRelease",n.value,e.index),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",d)},handleRemove:()=>{t("onRemove",e.index)}}}}),ce={class:"value"};function de(e,t,n,r,o,a){return H(($(),N("div",{class:"line",style:O([e.offset,e.borderCursor]),onMousedown:t[1]||(t[1]=(...l)=>e.handleDown&&e.handleDown(...l))},[R("div",{class:"action",style:O(e.actionStyle)},[R("span",{class:"del",onClick:t[0]||(t[0]=(...l)=>e.handleRemove&&e.handleRemove(...l))},"\xD7"),R("span",ce,j(e.startValue),1)],4)],36)),[[W,e.showLine]])}var ue=A(ie,[["render",de],["__scopeId","data-v-ddd28c10"]]);const Z=e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1,P=.83,he=(e,t,n,r)=>{const{scale:o,width:a,height:l,palette:v}=r,{bgColor:c,fontColor:m,shadowColor:f,ratio:u,longfgColor:i,shortfgColor:h}=v;if(e.scale(u,u),e.clearRect(0,0,a,l),e.fillStyle=c,e.fillRect(0,0,a,l),n){const g=(n.x-t)*o,w=n.width*o;e.fillStyle=f,e.fillRect(g,0,w,l*3/8)}const d=Z(o),S=d*o,s=d*10,C=s*o,b=Math.floor(t/d)*d,k=Math.floor(t/s)*s,V=(b-t)/d*S,Y=(k-t)/s*C,M=t+Math.ceil(a/o);e.beginPath(),e.fillStyle=m,e.strokeStyle=i;for(let g=k,w=0;g<M;g+=s,w++){const y=Y+w*C+.5;e.moveTo(y,0),e.save(),e.translate(y,l*.4),e.scale(P/u,P/u),e.fillText(g.toString(),4*u,7*u),e.restore(),e.lineTo(y,l*9/16)}e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle=h;for(let g=b,w=0;g<M;g+=d,w++){const y=V+w*S+.5;e.moveTo(y,0),g%s!=0&&e.lineTo(y,l*1/4)}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)},fe=(e,t,n,r)=>{const{scale:o,width:a,height:l,palette:v}=r,{bgColor:c,fontColor:m,shadowColor:f,ratio:u,longfgColor:i,shortfgColor:h}=v;if(e.scale(u,u),e.clearRect(0,0,a,l),e.fillStyle=c,e.fillRect(0,0,a,l),n){const g=(n.y-t)*o,w=n.height*o;e.fillStyle=f,e.fillRect(0,g,a*3/8,w)}const d=Z(o),S=d*o,s=d*10,C=s*o,b=Math.floor(t/d)*d,k=Math.floor(t/s)*s,V=(b-t)/d*S,Y=(k-t)/s*C,M=t+Math.ceil(l/o);e.beginPath(),e.fillStyle=m,e.strokeStyle=i;for(let g=k,w=0;g<M;g+=s,w++){const y=Y+w*C+.5;e.moveTo(0,y),e.save(),e.translate(a*.4,y),e.rotate(-Math.PI/2),e.scale(P/u,P/u),e.fillText(g.toString(),4*u,7*u),e.restore(),e.lineTo(a*9/16,y)}e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle=h;for(let g=b,w=0;g<M;g+=d,w++){const y=V+w*S+.5;e.moveTo(0,y),g%s!=0&&e.lineTo(a*1/4,y)}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)},ve={scale:Number,ratio:Number,palette:Object,vertical:Boolean,start:Number,width:Number,height:Number,selectStart:Number,selectLength:Number},ge=B({name:"CanvasRuler",props:ve,emits:["onAddLine","onIndicatorShow","onIndicatorMove","onIndicatorHide"],setup(e,{emit:t}){const n=K({canvasContext:null}),r=p(null);E(()=>{o(),a(),l()});const o=()=>{n.canvasContext=r.value&&r.value.getContext("2d")},a=()=>{if(r.value){const i=e.ratio;r.value.width=e.width*i,r.value.height=e.height*i;const h=n.canvasContext;h&&(h.font=`${12*i}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,h.lineWidth=1,h.textBaseline="middle")}},l=()=>{const i={scale:e.scale,width:e.width,height:e.height,palette:e.palette};e.vertical&&n.canvasContext?fe(n.canvasContext,e.start,{y:e.selectStart,height:e.selectLength},i):n.canvasContext&&he(n.canvasContext,e.start,{x:e.selectStart,width:e.selectLength},i)};q(()=>e.start,()=>l()),q([()=>e.width,()=>e.height],()=>{a(),l()});const v=(i,h,d)=>Math.round(h+i/d);return{state:n,canvas:r,initCanvasRef:o,handleClick:i=>{const h=e.vertical?i.offsetY:i.offsetX,d=v(h,e.start,e.scale);t("onAddLine",d)},handleEnter:i=>{const h=e.vertical?i.offsetY:i.offsetX,d=v(h,e.start,e.scale);t("onIndicatorShow",d)},handleMove:i=>{const h=e.vertical?i.offsetY:i.offsetX,d=v(h,e.start,e.scale);t("onIndicatorMove",d)},handleLeave:()=>{t("onIndicatorHide")}}}});function me(e,t,n,r,o,a){return $(),N("canvas",{ref:"canvas",class:"ruler",onClick:t[0]||(t[0]=(...l)=>e.handleClick&&e.handleClick(...l)),onMouseenter:t[1]||(t[1]=(...l)=>e.handleEnter&&e.handleEnter(...l)),onMousemove:t[2]||(t[2]=(...l)=>e.handleMove&&e.handleMove(...l)),onMouseleave:t[3]||(t[3]=(...l)=>e.handleLeave&&e.handleLeave(...l))},null,544)}var Ce=A(ge,[["render",me]]);const we={scale:Number,ratio:Number,thick:Number,palette:Object,vertical:{type:Boolean,default:!0},width:{type:Number,default:200},height:{type:Number,default:200},start:{type:Number,default:0},lines:{type:Array,default:()=>[100,200]},selectStart:{type:Number},selectLength:{type:Number},isShowReferLine:{type:Boolean}};const ye=B({name:"RulerWrapper",components:{CanvasRuler:Ce,RulerLine:ue},props:we,emits:["onLineChange"],setup(e,{emit:t}){const n=p(!1),r=p(!1),o=p(0),a=L(()=>e.vertical?"v-container":"h-container"),l=L(()=>{const s={width:`calc(100% - ${e.thick}px)`,height:`${e.thick+1}px`,left:`${e.thick}px`},C={width:`${e.thick&&e.thick+1}px`,height:`calc(100% - ${e.thick}px)`,top:`${e.thick}px`};return e.vertical?C:s}),v=L(()=>{var s;return{borderTop:`1px solid ${(s=e.palette)==null?void 0:s.lineColor}`,cursor:e.isShowReferLine?"ns-resize":"none"}}),c=L(()=>{var k;const s=(o.value-e.start)*e.scale;let C="top",b="borderLeft";return C=e.vertical?"top":"left",b=e.vertical?"borderBottom":"borderLeft",{[C]:s+"px",[b]:`1px solid ${(k=e.palette)==null?void 0:k.lineColor}`}}),m=s=>{e.lines.push(s),t("onLineChange",e.lines,e.vertical)},f=s=>{n.value||(r.value=!0,o.value=s)},u=s=>{r.value&&(o.value=s)},i=()=>{r.value=!1},h=()=>{n.value=!0},d=(s,C)=>{n.value=!1;const b=s-e.start,k=(e.vertical?e.height:e.width)/e.scale;b<0||b>k?S(C):(e.lines[C]=s,t("onLineChange",e.lines,e.vertical))},S=s=>{e.lines.splice(s,1),t("onLineChange",e.lines,e.vertical)};return{isDraggingLine:n,showIndicator:r,valueNum:o,rwClassName:a,rwStyle:l,lineStyle:v,indicatorStyle:c,handleNewLine:m,handleLineDown:h,handleLineRelease:d,handleIndicatorMove:u,handleIndicatorShow:f,handleIndicatorHide:i,handleLineRemove:S}}}),Le={class:"lines"},Se={class:"value"};function be(e,t,n,r,o,a){const l=I("CanvasRuler"),v=I("RulerLine");return $(),N("div",{class:U(e.rwClassName),style:O(e.rwStyle)},[D(l,{vertical:e.vertical,scale:e.scale,width:e.width,height:e.height,start:e.start,ratio:e.ratio,"select-start":e.selectStart,"select-length":e.selectLength,palette:e.palette,onOnAddLine:e.handleNewLine,onOnIndicatorShow:e.handleIndicatorShow,onOnIndicatorMove:e.handleIndicatorMove,onOnIndicatorHide:e.handleIndicatorHide},null,8,["vertical","scale","width","height","start","ratio","select-start","select-length","palette","onOnAddLine","onOnIndicatorShow","onOnIndicatorMove","onOnIndicatorHide"]),H(R("div",Le,[($(!0),N(G,null,ne(e.lines,(c,m)=>($(),oe(v,{key:c+m,index:m,value:c>>0,scale:e.scale,start:e.start,thick:e.thick,palette:e.palette,vertical:e.vertical,"is-show-refer-line":e.isShowReferLine,onOnRemove:e.handleLineRemove,onOnMouseDown:e.handleLineDown,onOnRelease:e.handleLineRelease},null,8,["index","value","scale","start","thick","palette","vertical","is-show-refer-line","onOnRemove","onOnMouseDown","onOnRelease"]))),128))],512),[[W,e.isShowReferLine]]),H(R("div",{class:"indicator",style:O(e.indicatorStyle)},[R("div",Se,j(e.valueNum),1)],4),[[W,e.showIndicator]])],6)}var Re=A(ye,[["render",be],["__scopeId","data-v-1e2d9ce8"]]);const ke={scale:{type:Number,default:1},ratio:{type:Number,default:window.devicePixelRatio||1},thick:{type:Number,default:16},palette:Object,startX:{type:Number},startY:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},shadow:Object,horLineArr:{type:Array,default:()=>[100,200]},verLineArr:{type:Array,default:()=>[100,200]},cornerActive:{type:Boolean,default:!1},isShowReferLine:{type:Boolean,default:!0}};const pe=B({name:"SketchRule",components:{RulerWrapper:Re},props:ke,emits:["onCornerClick","handleLine"],setup(e,{emit:t}){const n=L(()=>Q({x:0,y:0,width:200,height:200},e.shadow||{})),r=L(()=>Q({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#EB5648",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e.palette||{})),o=L(()=>e.cornerActive?" active":""),a=L(()=>({backgroundColor:r.value.bgColor,width:e.thick+"px",height:e.thick+"px",borderRight:`1px solid ${r.value.borderColor}`,borderBottom:`1px solid ${r.value.borderColor}`}));return{paletteCpu:r,shadowCpu:n,cornerActiveClass:o,cornerStyle:a,onCornerClick:c=>{t("onCornerClick",c)},handleLineChange:(c,m)=>{const f=m?{h:e.horLineArr,v:[...c]}:{h:[...c],v:e.verLineArr};t("handleLine",f)}}}}),$e={id:"mb-ruler",class:"style-ruler mb-ruler"};function Ne(e,t,n,r,o,a){const l=I("RulerWrapper");return $(),N("div",$e,[D(l,{vertical:!1,width:e.width,height:e.thick,"is-show-refer-line":e.isShowReferLine,thick:e.thick,ratio:e.ratio,start:e.startX,lines:e.horLineArr,"select-start":e.shadowCpu.x,"select-length":e.shadowCpu.width,scale:e.scale,palette:e.paletteCpu,onOnLineChange:e.handleLineChange},null,8,["width","height","is-show-refer-line","thick","ratio","start","lines","select-start","select-length","scale","palette","onOnLineChange"]),D(l,{vertical:!0,width:e.thick,height:e.height,"is-show-refer-line":e.isShowReferLine,thick:e.thick,ratio:e.ratio,start:e.startY,lines:e.verLineArr,"select-start":e.shadowCpu.y,"select-length":e.shadowCpu.height,scale:e.scale,palette:e.paletteCpu,onOnLineChange:e.handleLineChange},null,8,["width","height","is-show-refer-line","thick","ratio","start","lines","select-start","select-length","scale","palette","onOnLineChange"]),R("a",{class:U(["corner",e.cornerActiveClass]),style:O(e.cornerStyle),onClick:t[0]||(t[0]=(...v)=>e.onCornerClick&&e.onCornerClick(...v))},null,6)])}var T=A(pe,[["render",Ne]]);T.install=e=>{e.component(T.name,T)};const J=200,_=200,Oe=B({components:{SketchRule:T},setup(){const e=p(null),t=p(null),n=K({scale:1,startX:0,startY:0,lines:{h:[100,200],v:[100,200]},thick:20,isShowRuler:!0,isShowReferLine:!0}),r=L(()=>({x:0,y:0,width:J,height:_})),o=L(()=>({width:J,height:_,transform:`scale(${n.scale})`}));E(()=>{e.value.scrollLeft=t.value.getBoundingClientRect().width/2-300});const a=c=>{n.lines=c},l=()=>{const c=document.querySelector("#screens").getBoundingClientRect(),m=document.querySelector("#canvas").getBoundingClientRect(),f=(c.left+n.thick-m.left)/n.scale,u=(c.top+n.thick-m.top)/n.scale;n.startX=f,n.startY=u};return{screensRef:e,containerRef:t,state:n,shadow:r,canvasStyle:o,handleWheel:c=>{if(c.ctrlKey||c.metaKey){c.preventDefault();const m=parseFloat(Math.max(.2,n.scale-c.deltaY/500).toFixed(2));n.scale=m}le(()=>{l()})},handleScroll:l,handleLine:a}}}),Me={class:"wrapper"},Be={ref:"containerRef",class:"screen-container"};function De(e,t,n,r,o,a){const l=I("SketchRule");return $(),N("div",Me,[D(l,{thick:e.state.thick,scale:e.state.scale,width:582,height:482,"start-x":e.state.startX,"start-y":e.state.startY,shadow:e.shadow,"hor-line-arr":e.state.lines.h,"ver-line-arr":e.state.lines.v,"corner-active":!0,onHandleLine:e.handleLine},null,8,["thick","scale","start-x","start-y","shadow","hor-line-arr","ver-line-arr","onHandleLine"]),R("div",{id:"screens",ref:"screensRef",onWheel:t[0]||(t[0]=(...v)=>e.handleWheel&&e.handleWheel(...v)),onScroll:t[1]||(t[1]=(...v)=>e.handleScroll&&e.handleScroll(...v))},[R("div",Be,[R("div",{id:"canvas",style:O(e.canvasStyle)},null,4)],512)],544)])}var Ae=A(Oe,[["render",De]]);const Ie=R("span",null,"2021/10/11",-1),Pe={setup(e){return(t,n)=>($(),N(G,null,[Ie,D(Ae)],64))}},Te=ae(Pe);Te.mount("#app");
